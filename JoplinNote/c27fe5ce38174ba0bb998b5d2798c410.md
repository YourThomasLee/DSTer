5. git使用日记

有用的参考文档： [link](https://help.aliyun.com/document_detail/206889.html)
- 日常三连
```bash
git add filename
git commit -m "comment"
git push origin master
```

- push成功后变更修改：
```bash
git add -u file_modified
git commit --amend
git push origin master
```

- 清空暂存区的文件： `git rm --cache filename`
- 回滚本地错误的提交：找到提交之前的版本库ID，然后执行以下步骤
```bash
git reset --mixed 版本库ID #只撤销库提交记录，不会影响本地文件
git reset --hard 版本库ID #撤销提交，恢复本地文件
```

- 大文件git-lfs的相关使用: 下载安装后，打开命令行
```bash
git lfs install
```
需要迁移本地历史仓库： lfs重写本地历史 -> force push覆写远端，达到迁移的效果。
```bash
git lfs migrate import --include="*.bin,*.lib,*.so,*.dll,*.a,*.param,*.zip,*.gz" --everything
git push --force --all #迁移所有记录和文件
```

- 需要查看某个文件具体的修改记录
```bash
#git blame -L startLine,endLine Filename.cpp
git blame -L 100,200 test.cpp
# commitID	User	modificationTime	lines)	codes
497dace89 (zhangphil 2018-05-02 19:10:58 +0800 201)     private class RVItem extends Item {
ae3abc303 (zhangphil 2018-05-12 17:48:37 +0800 202)         ResearchReportData researchReportData;
ae3abc303 (zhangphil 2018-05-12 17:48:37 +0800 203)
497dace89 (zhangphil 2018-05-02 19:10:58 +0800 204)         @Override
```
- 查看某一次提交的具体内容
```bash
git show commitID
```
- 丢弃修改
	- 没有执行git add的： `git checkout-filename`, 丢弃所有本地修改`git checkout .`
	- 执行了git add的： `git reset HEAD filename`, 放弃了所有修改： `git reset HEAD`
	- 执行了git commit的： `git reset --hard HEAD^`, 也可以直接指定任意commit_id`git reset --hard commitid`
	- 放弃本地所有修改，同步到远程仓库
		```bash
		git fetch --all
		git reset --hard origin/master
		git pull
		```
- 暂存现有更改
	```bash
	git stash
	git stash pop
	```
	
- 撤销amend
	```bash
	git reflog #找到amend前一个提交， 设其为HEAD@{1}
	git reset --soft HEAD@{1}
	git status # 检查状态
	```
- 获取其他分支修改到本分支
	```bash
	git cherry-pick commitID
	# push到远程分支
	```

id: c27fe5ce38174ba0bb998b5d2798c410
parent_id: 5c2f695eacaa45358e6c9c5e1baaf6e7
created_time: 2023-04-03T01:34:10.402Z
updated_time: 2023-05-24T02:31:27.021Z
is_conflict: 0
latitude: 31.23041600
longitude: 121.47370100
altitude: 0.0000
author: 
source_url: 
is_todo: 0
todo_due: 0
todo_completed: 0
source: joplin-desktop
source_application: net.cozic.joplin-desktop
application_data: 
order: 0
user_created_time: 2023-04-03T01:34:10.402Z
user_updated_time: 2023-05-24T02:31:27.021Z
encryption_cipher_text: 
encryption_applied: 0
markup_language: 1
is_shared: 0
share_id: 
conflict_original_id: 
master_key_id: 
user_data: 
type_: 1