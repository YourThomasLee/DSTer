>   ref: [爱迪生分层实验平台](http://wiki.baidu.com/pages/viewpage.action?pageId=261825680)

## ovlexp&lvlexp

*   afd访问xexp模块，进行爱迪生实验反流和填充实验参数，取得ovlexp & lvlexp
    *   Ovlexp: 存储实验参数，负责传递全流量分层框架注册的策略配置
    *   Lvlexp: 指定路由信息，负责传递路由路径参数

## 全流量实验框架

*   **背景**

    全流量实验时，router给所有流量打上实验标识和参数染色，复用流量进行多个实验。当线上并行实验较多，一个流量可能叠加实验组合庞大，则线下测试困难

*   **作用**

    保持下游系统稳定，在router加载实验配置时，进行线上流量压力测试，验证实验配置的正确性以及实验改变导致的流量叠加不会引起下游模块异常

## 分层实验

<img src="http://bj.bcebos.com/ibox-thumbnail98/1d21034fdc468709fa764e3f6be4ee21?authorization=bce-auth-v1%2Ffbe74140929444858491fbf2b6bc0935%2F2021-07-29T03%3A24%3A41Z%2F1800%2F%2F440a1fefce8b32cb259216943ae997ef97409241256e1085362782f0f77b2199">

### 三种平台

*   **独立评估平台(e平台)**
    *   进程级别
    *   每套实验平台都包括完整的检索流程：as-cs-bs-qs-ranker
    *   适用背景：需要同时修改多个层级bin、词典或其他进程级别配置的实验
*   **分层实验平台(d平台，data平台)**
    *   进程级别平台
    *   各层级之间混连，只支持单层实验，不支持多层级同时实验
*   **全流量平台(n平台)**
    *   线程级别实验平台
    *   同时在n平台和d平台实验，ovlexp支持动态变量+yacl配置文件两种资源的实验
    *   ovlexp无法修改bin等进程级别的配置 => 先做全流量bin升级，再进行实验
*   **lvlexp**
    *   上述三种实验平台的部署通过lvlexp部署